@startuml
!theme plain
skinparam classAttributeIconSize 0

' Package tanımlamaları
package "interfaces" {
    interface Completable {
        + complete() : void
    }
}

package "model" {
    enum Priority {
        LOW
        MEDIUM
        HIGH
    }

    class Task {
        - String id
        - String title
        - String description
        - boolean completed
        - Priority priority
        + Task(id: String, title: String, description: String)
        + getId() : String
        + getTitle() : String
        + getDescription() : String
        + isCompleted() : boolean
        + complete() : void
        + getPriority() : Priority
        + setPriority(priority: Priority) : void
        + getDetails() : String
        + toString() : String
    }

    class TimedTask {
        - Deadline deadline
        + TimedTask(id: String, title: String, description: String, deadline: Deadline)
        + getDeadline() : Deadline
        + getDetails() : String
    }

    class Deadline {
        - LocalDate dueDate
        + Deadline(dueDate: LocalDate)
        + getDueDate() : LocalDate
    }

    class User {
        - String id
        - String name
        - List<Task> tasks
        + User(id: String, name: String)
        + getId() : String
        + getName() : String
        + getTasks() : List<Task>
        + addTask(task: Task) : void
    }

    class Project {
        - String id
        - String name
        - List<Task> tasks
        + Project(id: String, name: String)
        + getId() : String
        + getName() : String
        + getTasks() : List<Task>
        + addTask(task: Task) : void
    }

    class Notification {
        - String message
        - LocalDateTime createdAt
        - Task relatedTask
        + Notification(message: String, relatedTask: Task)
        + getMessage() : String
        + getCreatedAt() : LocalDateTime
        + getRelatedTask() : Task
    }
}

package "service" {
    class TaskService {
        - List<Task> tasks
        - NotificationService notificationService
        + TaskService()
        + TaskService(notificationService: NotificationService)
        + createTask(id: String, title: String, description: String) : Task
        + createTimedTask(id: String, title: String, description: String, dueDate: LocalDate) : TimedTask
        + getAllTasks() : List<Task>
        + completeTask(taskId: String) : boolean
        + assignTaskToUser(task: Task, user: User) : void
        + assignTaskToProject(task: Task, project: Project) : void
        + getUpcomingTasks() : List<TimedTask>
        + findTaskById(taskId: String) : Task
        + taskExists(taskId: String) : boolean
        + hasTasks() : boolean
        + deleteTask(taskId: String) : boolean
        + deleteAllTasks() : void
    }

    class ProjectService {
        - List<Project> projects
        + ProjectService()
        + createProject(id: String, name: String) : Project
        + getAllProjects() : List<Project>
        + findProjectById(projectId: String) : Project
        + getProjectTasks(projectId: String) : List<Task>
        + projectExists(projectId: String) : boolean
        + hasProjects() : boolean
        + deleteProject(projectId: String) : boolean
        + deleteAllProjects() : void
    }

    class UserService {
        - List<User> users
        + addUser(id: String, name: String) : void
        + findUserById(id: String) : User
        + getAllUsers() : List<User>
        + userExists(id: String) : boolean
        + hasUsers() : boolean
        + deleteUser(id: String) : boolean
        + deleteAllUsers() : void
    }

    class NotificationService {
        - List<Notification> notifications
        + NotificationService()
        + addNotification(notification: Notification) : void
        + getAllNotifications() : List<Notification>
        + hasNotifications() : boolean
    }

    class ExportService {
        + exportAllTasksToFile(taskService: TaskService, projectService: ProjectService, userService: UserService, fileName: String) : boolean
        + exportAllProjectsToFile(projectService: ProjectService, fileName: String) : boolean
        + exportAllUsersToFile(userService: UserService, fileName: String) : boolean
        + exportAllToFile(taskService: TaskService, projectService: ProjectService, userService: UserService, fileName: String) : boolean
        + saveDataToFile(taskService: TaskService, projectService: ProjectService, userService: UserService, fileName: String) : boolean
        + importFromSimpleFormat(taskService: TaskService, projectService: ProjectService, userService: UserService, fileName: String) : boolean
    }
}

' İlişkiler
Task ..|> Completable : implements
TimedTask --|> Task : extends
TimedTask *-- Deadline : composition
Task "0..*" -- "0..*" User : assigned to
Task "0..*" -- "0..*" Project : belongs to
Notification --> Task : references
TaskService --> Task : manages
TaskService --> User : uses
TaskService --> Project : uses
TaskService --> NotificationService : uses
ProjectService --> Project : manages
UserService --> User : manages
NotificationService --> Notification : manages
ExportService --> TaskService : uses
ExportService --> ProjectService : uses
ExportService --> UserService : uses
Task --> Priority : uses

note right of TimedTask
  Polymorphism örneği:
  getDetails() metodu override edilmiştir
end note

note right of TaskService
  List<Task> içinde hem Task
  hem TimedTask tutulabilir
  (Polymorphism)
end note

@enduml

